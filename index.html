<!DOCTYPE html>
<html lang="en-us">
	<head>
		<LINK href="stylesheets/stylesheet.css" rel="stylesheet" type="text/css">
	</head>
	<body>
	<script>
	
	function calculate_this() {
		var stream1MassFlow = eval(document.getElementById("stream1MassFlow").value)
		
		var stream1InletTemp = eval(document.getElementById("stream1InletTemp").value)
		var stream1OutletTemp = eval(document.getElementById("stream1OutletTemp").value)
		var stream1MeanTemp=(stream1InletTemp+stream1OutletTemp)/2
		var stream1TempDiff = stream1OutletTemp - stream1InletTemp
		document.getElementById('results').innerHTML = "Stream 1 [Shellside] Mean Temperature: " + stream1MeanTemp + " °C<br>"
		
		var stream1InSHC = eval(document.getElementById("stream1InletSHC").value)
		var stream1OutSHC = eval(document.getElementById("stream1OutletSHC").value)
		var stream1MeanSHC=(stream1InSHC+stream1OutSHC)/2
		document.getElementById('results').innerHTML += "Stream 1 [Shellside] Mean Spec Heat Capacity: " + stream1MeanSHC + " J/kgK<br>"
		
		var duty = Math.abs(stream1MassFlow*stream1MeanSHC*stream1TempDiff)
		document.getElementById('results').innerHTML += "Duty: " + duty + " W<br><br>"
		
		var stream2MassFlow = eval(document.getElementById("stream2MassFlow").value)
		var stream2InletTemp = eval(document.getElementById("stream2InletTemp").value)
		
		var stream2InSHC = eval(document.getElementById("stream2InletSHC").value)
		var stream2OutSHC = eval(document.getElementById("stream2OutletSHC").value)
		var stream2MeanSHC=(stream2InSHC+stream2OutSHC)/2
		document.getElementById('results').innerHTML += "Stream 2 [Tubeside] Mean Spec Heat Capacity: " + stream2MeanSHC + " J/kgK<br>"
		
		var stream2OutletTemp = stream2InletTemp+(duty/(stream2MassFlow*stream2MeanSHC))
		var stream2MeanTemp=(stream2InletTemp+stream2OutletTemp)/2
		var stream2TempDiff = stream2OutletTemp - stream2InletTemp
		document.getElementById('results').innerHTML += "Stream 2 [Tubeside] Outlet Temperature: " + stream2OutletTemp + " °C<br>"
		document.getElementById('results').innerHTML += "Stream 2 [Tubeside] Mean Temperature: " + stream2MeanTemp + " °C<br>"
		
		var currentMode = document.getElementById("currentMode").value
		var currentModeString
		if (currentMode=="counterCurrent"){
			var currentModeString = "Counter-current "
			var LMTDnumerator = (stream1InletTemp - stream2OutletTemp) - (stream1OutletTemp - stream2InletTemp)
			var LMTDdenominator = Math.log((stream1InletTemp - stream2OutletTemp) / (stream1OutletTemp - stream2InletTemp))
			
			var Rnumerator = stream1InletTemp-stream1OutletTemp
			var Rdenominator = stream2OutletTemp-stream2InletTemp
			
			var Snumerator = stream2OutletTemp-stream2InletTemp
			var Sdenominator = stream1InletTemp-stream2InletTemp
		}
		if (currentMode=="coCurrent"){
			var currentModeString = "Co-current "
			var LMTDnumerator = (stream1InletTemp - stream2InletTemp) - (stream1OutletTemp - stream2OutletTemp)
			var LMTDdenominator = Math.log((stream1InletTemp - stream2InletTemp) / (stream1OutletTemp - stream2OutletTemp))
		}
		var R = Rnumerator/Rdenominator
		var S = Snumerator/Sdenominator
		var LMTD = LMTDnumerator/LMTDdenominator
		document.getElementById('results').innerHTML += "<br>" + currentModeString + "Log Mean Temperature Difference, ΔTLM: " + LMTD + " °C<br>"
		document.getElementById('results').innerHTML += "R: " + R.toPrecision(3) + "<br>"
		document.getElementById('results').innerHTML += "S (aka P on chart): " + S.toPrecision(3) + "<br><br>"
		
		var U = eval(document.getElementById("estOverCoeff").value)
		var Ft = eval(document.getElementById("Ft").value)
		var dTm = Ft*LMTD
		var heatTransferArea = duty/(U*Ft*LMTD)
		document.getElementById('results').innerHTML += "Actual Temperature Difference, ΔTm: " + dTm + " °C<br>"
		document.getElementById('results').innerHTML += "Heat Transfer Area: " + heatTransferArea + " m^2<br>"
	}
	</script>
	
	<br>Properties of Stream 1 (Shellside) [This stream cools down]<br>
	Mass Flow: <input type="text" class="inputText" id="stream1MassFlow" value="5e3/3600"> kg/s<br>
	Inlet Temperature, T1: <input type="text" class="inputText" id="stream1InletTemp" value="200"> °C<br>
	Outlet Temperature, T2: <input type="text" class="inputText" id="stream1OutletTemp" value="80"> °C<br>
	
	Inlet Spec Heat Capacity, C1: <input type="text" class="inputText" id="stream1InletSHC" value="2176"> J/kgK<br>
	Outlet Spec Heat Capacity, C2: <input type="text" class="inputText" id="stream1OutletSHC" value="2176"> J/kgK<br>
	
	<br>Properties of Stream 2 (Tubeside) [This stream heats up]<br>
	Mass Flow: <input type="text" class="inputText" id="stream2MassFlow" value="12e3/3600"> kg/s<br>
	Inlet Temperature, t1: <input type="text" class="inputText" id="stream2InletTemp" value="20"> °C<br>
	
	Inlet Spec Heat Capacity, c1: <input type="text" class="inputText" id="stream2InletSHC" value="4200"> J/kgK<br>
	Outlet Spec Heat Capacity, c2: <input type="text" class="inputText" id="stream2OutletSHC" value="4.2e3"> J/kgK<br>
	
	<br>Heat Exchanger<br>
	Estimated Overall Coefficient, U: <input type="text" class="inputText" id="estOverCoeff" value="600"> W/m^2 °C<br>
	Mode: <select id = "currentMode">
		<option value="counterCurrent">Counter-current</option>
		<option value="coCurrent">Co-current</option>
	</select><br>
	Correction Factor (get from chart using R and S, must be more than 0.85), Ft: <input type="text" class="inputText" id="Ft" value="0.85"><br>
	
	<br><input type=button value="Calculate" onClick="calculate_this()"><br>
	<br><span id="results">(click "Calculate")</span>
	
	</body>
</html>
